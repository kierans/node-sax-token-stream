<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: adaptors/sax-event-adaptor.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: adaptors/sax-event-adaptor.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

const EventEmitter = require("node:events");

const { TokenisingStream } = require("tokenising-stream");

const { assign2 } = require("./utils");

/**
 * @typedef {Object} SAXEventAdaptor~AttributeToken
 * @property {'attribute'} type - Token type
 * @property {string} name - Attribute name
 * @property {string} value - Attribute value
 */

/**
 * @typedef {Object} SAXEventAdaptor~CDataToken
 * @property {'cdata'} type - Token type
 * @property {string} cdata - CDATA content
 */

/**
 * @typedef {Object} SAXEventAdaptor~CloseCDataToken
 * @property {'closecdata'} type - Token type
 */

/**
 * @typedef {Object} SAXEventAdaptor~CloseNamespaceToken
 * @property {'closenamespace'} type - Token type
 * @property {string} prefix - Namespace prefix
 * @property {string} uri - Namespace URI
 */

/**
 * @typedef {Object} SAXEventAdaptor~CloseTagToken
 * @property {'closetag'} type - Token type
 * @property {string} name - Tag name
 */

/**
 * @typedef {Object} SAXEventAdaptor~CommentToken
 * @property {'comment'} type - Token type
 * @property {string} comment - Comment content
 */

/**
 * @typedef {Object} SAXEventAdaptor~DoctypeToken
 * @property {'doctype'} type - Token type
 * @property {string} doctype - DOCTYPE declaration
 */

/**
 * @typedef {Object} SAXEventAdaptor~OpenCDataToken
 * @property {'opencdata'} type - Token type
 */

/**
 * @typedef {Object} SAXEventAdaptor~OpenTagToken
 * @property {'opentag'} type - Token type
 * @property {string} name - Tag name
 * @property {boolean} isSelfClosing - Whether the tag is self-closing
 */

/**
 * @typedef {Object} SAXEventAdaptor~OpenTagStartToken
 * @property {'opentagstart'} type - Token type
 * @property {string} name - Tag name
 */

/**
 * @typedef {Object} SAXEventAdaptor~OpenNamespaceToken
 * @property {'opennamespace'} type - Token type
 * @property {string} prefix - Namespace prefix
 * @property {string} uri - Namespace URI
 */

/**
 * @typedef {Object} SAXEventAdaptor~ProcessingInstructionToken
 * @property {'processinginstruction'} type - Token type
 * @property {string} name - Processing instruction name
 * @property {string} body - Processing instruction body
 */

/**
 * @typedef {Object} SAXEventAdaptor~ScriptToken
 * @property {'script'} type - Token type
 * @property {string} script - Script content
 */

/**
 * @typedef {Object} SAXEventAdaptor~SGMLDeclarationToken
 * @property {'sgmldeclaration'} type - Token type
 * @property {string} sgmldeclaration - Declaration content
 */

/**
 * @typedef {Object} SAXEventAdaptor~TextToken
 * @property {'text'} type - Token type
 * @property {string} text - Text content
 */

/**
 * @typedef {SAXEventAdaptor~AttributeToken|SAXEventAdaptor~CDataToken|SAXEventAdaptor~CloseCDataToken|SAXEventAdaptor~CloseNamespaceToken|SAXEventAdaptor~CloseTagToken|SAXEventAdaptor~CommentToken|SAXEventAdaptor~DoctypeToken|SAXEventAdaptor~OpenCDataToken|SAXEventAdaptor~OpenTagToken|SAXEventAdaptor~OpenTagStartToken|SAXEventAdaptor~OpenNamespaceToken|SAXEventAdaptor~ProcessingInstructionToken|SAXEventAdaptor~ScriptToken|SAXEventAdaptor~SGMLDeclarationToken|SAXEventAdaptor~TextToken} SAXEventAdaptor~SAXToken
 */

/**
 * EventAdaptor for SAX parser.
 *
 * The following events are piped through the stream as tokens
 *
 * &lt;ul>
 *   &lt;li>&lt;b>attribute&lt;/b> - {@link SAXEventAdaptor~AttributeToken}&lt;/li>
 *   &lt;li>&lt;b>cdata&lt;/b> - {@link SAXEventAdaptor~CDataToken}&lt;/li>
 *   &lt;li>&lt;b>closecdata&lt;/b> - {@link SAXEventAdaptor~CloseCDataToken}&lt;/li>
 *   &lt;li>&lt;b>closenamespace&lt;/b> - {@link SAXEventAdaptor~CloseNamespaceToken}&lt;/li>
 *   &lt;li>&lt;b>closetag&lt;/b> - {@link SAXEventAdaptor~CloseTagToken}&lt;/li>
 *   &lt;li>&lt;b>comment&lt;/b> - {@link SAXEventAdaptor~CommentToken}&lt;/li>
 *   &lt;li>&lt;b>doctype&lt;/b> - {@link SAXEventAdaptor~DoctypeToken}&lt;/li>
 *   &lt;li>&lt;b>opencdata&lt;/b> - {@link SAXEventAdaptor~OpenCDataToken}&lt;/li>
 *   &lt;li>&lt;b>opentag&lt;/b> - {@link SAXEventAdaptor~OpenTagToken}&lt;/li>
 *   &lt;li>&lt;b>opentagstart&lt;/b> - {@link SAXEventAdaptor~OpenTagStartToken}&lt;/li>
 *   &lt;li>&lt;b>opennamespace&lt;/b> - {@link SAXEventAdaptor~OpenNamespaceToken}&lt;/li>
 *   &lt;li>&lt;b>processinginstruction&lt;/b> - {@link SAXEventAdaptor~ProcessingInstructionToken}&lt;/li>
 *   &lt;li>&lt;b>script&lt;/b> - {@link SAXEventAdaptor~ScriptToken}&lt;/li>
 *   &lt;li>&lt;b>sgmldeclaration&lt;/b> - {@link SAXEventAdaptor~SGMLDeclarationToken}&lt;/li>
 *   &lt;li>&lt;b>text&lt;/b> - {@link SAXEventAdaptor~TextToken}&lt;/li>
 * &lt;/ul>
 *
 * @implements EventAdaptor
 * @see https://www.npmjs.com/package/sax
 */
class SAXEventAdaptor extends EventEmitter {
	/**
	 * @param {Writable} delegate
	 */
	constructor(delegate) {
		super();

		delegate.on("attribute", (token) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, assign2(token, {
				type: "attribute"
			}));
		});

		delegate.on("cdata", (text) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "cdata",
				cdata: text
			});
		});

		delegate.on("closecdata", () => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "closecdata"
			});
		});

		delegate.on("closenamespace", (ns) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, assign2(ns, {
				type: "closenamespace",
			}));
		});

		delegate.on("closetag", (name) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "closetag",
				name
			});
		});

		delegate.on("comment", (comment) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "comment",
				comment: comment
			});
		});

		delegate.on("doctype", (doctype) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "doctype",
				doctype
			});
		});

		delegate.on("opencdata", () => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "opencdata"
			});
		});

		delegate.on("opennamespace", (ns) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, assign2(ns, {
				type: "opennamespace",
			}));
		});

		delegate.on("opentag", (node) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, assign2(node, {
				type: "opentag",
			}));
		});

		delegate.on("opentagstart", (node) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, assign2(node, {
				type: "opentagstart",
			}));
		});

		delegate.on("processinginstruction", (instruction) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, assign2(instruction, {
				type: "processinginstruction",
			}));
		});

		delegate.on("script", (script) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "script",
				script: script
			});
		});

		delegate.on("sgmldeclaration", (sgmldeclaration) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "sgmldeclaration",
				sgmldeclaration: sgmldeclaration
			});
		});

		delegate.on("text", (text) => {
			this.emit(TokenisingStream.TOKEN_EVENT_NAME, {
				type: "text",
				text: text
			});
		});

		delegate.on("error", (error) => {
			this.emit(TokenisingStream.ERROR_EVENT_NAME, error);
		})
	}
}

module.exports = SAXEventAdaptor;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="SAXEventAdaptor.html">SAXEventAdaptor</a></li></ul><h3>Global</h3><ul><li><a href="global.html#newSAXStream">newSAXStream</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Aug 22 2025 07:12:56 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
